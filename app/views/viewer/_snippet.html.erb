<div class="part" id="part">
  <%= @current_snippet.french.html_safe %>
</div>

<div id="translate_actions">  
  <ul>
    <li><a href="#" id="do_translate">Übersetzen</a></li>
    <li><a href="#" class="btn-timer">Nächstes Datenpaket in <span class="countdown"></span></a></li>
    </ul>
</div>

<div id="actions">
  <ul>
    <li><a href="snipet_01_wait.html">Unbedenklich</a></li>
    <li><a href="snipet_01_wait.html">Auffällig<br/><span class="explanation">Stichproben</span></a></li>
    <li><a href="snipet_01_wait.html">Potenzielle Gefahr<br/><span class="explanation">Konstant beobachten</span></a></li>
    <li><a href="snipet_01_wait.html" class="btn-warning">Terrorgefahr<br/><span class="explanation">Als Gefahr einstufen</span></a></li>
    <li><a href="snipet_01_wait.html" class="btn-timer">Nächstes Datenpaket in <span class="countdown"></span></a></li>
  </ul>
</div>

<script>
  var repeatPulling = window.setInterval('nextSnippet();', 12000);
  var nextSnippet = function() { 
    console.log('do something...');
  }

  $('#do_translate').on('click', function(e){
    e.preventDefault();
    $('#part').html('<%= j @current_snippet.german %>')
    $('#translate_actions').hide();
    $('#actions').show();
  });

  var count = <%= @next_snippet.time_remaining %>;
  var counter = window.setInterval('timer()', 1000);
  var timer = function () {
    count = count-1;
    if (count <= 0) {
       clearInterval(counter);
       //counter ended, do something here
       return;
    }
    $('.countdown').html(count);
  }

</script>